/*
 * 	gfXT
 * 	  - version 1.11
 * 	  - Published at http://gfunction.com/
 * 
 * 	Copyright (c) 2011 Saneyuki Tadokoro
 */
(function(){var sys=(function(pn){var pac=new Object();var core=function(){var method={addPackage:function(pn,p,info){if(method.hasPackage(pn)||!p)return false;var is;if(typeof info=="object"){is=function(){var n,i=Object();for(n in info)i[n]=info[n];return i;};}else{is=function(){return false;};}pac[pn]={xpackage:p,accessory:new Object(),information:is};},getPackage:function(pn){if(!method.hasPackage(pn))return false;return pac[pn].xpackage();},getAccessory:function(pn){if(!method.hasPackage(pn))return false;return pac[pn].accessory;},getPackageInfo:function(pn){if(!method.hasPackage(pn))return false;return pac[pn].information();},hasPackage:function(pn){return typeof pac[pn]=="object";}};return method;};var coreInfo={name:"The high privileged package management system for secure your system",version:"1.0",egg:function(a){if(a=="hi") alert("404 ERROR:Saneyuki Tadokoro NOT FOUND. lol")}};core().addPackage("core",core,coreInfo);return function(pn){var r,p,h;if(typeof pn !="string")pn="core";if(core().hasPackage(pn)){p=pac[pn].xpackage();h=p.handler;}elser=false;if(h)r=h.apply(p,arguments);if(r===false)return !(!false );return p;};})();var basePackage=(function(){var core=function(){var method={getClientWidth:function(){var width;if(window.innerWidth) width=window.innerWidth;else if(document.documentElement.clientWidth !=0)width=document.documentElement.clientWidth;else if(document.body)width=document.body.clientWidth;return width;},getClientHeight:function(){var height;if(window.innerHeight)height=window.innerHeight;else if(document.documentElement.clientHeight !=0)height=document.documentElement.clientHeight;else if(document.body)height=document.body.clientHeight;return height;},getPageXOffset:function(){var pageX;if(window.pageXOffset>=0)pageX=window.pageXOffset;else if(document.documentElement.scrollLeft>=0)pageX=document.documentElement.scrollLeft;else if(document.body.scrollLeft>=0)pageX=document.body.scrollLeft;return pageX;},getPageYOffset:function(){var pageY;if(window.pageYOffset>=0)pageY=window.pageYOffset;else if(document.documentElement.scrollTop>=0)pageY=document.documentElement.scrollTop;else if(document.body.scrollTop>=0)pageY=document.body.scrollTop;return pageY;},getXhr:function(){var result;if(window.XMLHttpRequest){result=new XMLHttpRequest();}else if(window.ActiveXObject){try{result=new ActiveXObject("Msxml2.XMLHTTP");}catch(e){result=new ActiveXObject("Microsoft.XMLHTTP");};}elseresult=false;return result;},getResponse:function(source){var xhr=method.getXhr();var responseType=source.responseType;var fileName=source.fileName;var m=source.method;var postData=source.postData;var func=source.callback;var async=source.async;var cache=source.cache;if(!(xhr &&typeof responseType=="string" &&typeof fileName=="string" &&typeof m=="string" &&(typeof postData=="string"||postData==null) &&(typeof func=="function"||func==null) &&(async==true||async==false)))return false;if(typeof cache !="boolean")cache=true;var result;var onLoadFunc=function(){if(xhr.readyState==4 && xhr.status==200){if("XML"==responseType && func !=null){result=func(xhr.responseXML,true);}else if("TXT"==responseType && func !=null){result=func(xhr.responseText,true);}else if(responseType=="XML" && func==null) result=xhr.responseXML;else if(responseType=="TXT" && func==null) result=xhr.responseText;elseresult=false;}else if(xhr.readyState==4 && xhr.status==400);else if(xhr.readyState==4 && xhr.status==401);else if(xhr.readyState==4 && xhr.status==403);else if(xhr.readyState==4 && xhr.status==404) alert("404:"+fileName+" NOT FOUND");else if(xhr.readyState==4 && xhr.status==500);else{}};if(cache)xhr.open(m,fileName,async);else if(!cache){if(fileName.indexOf('?',0) !=-1) xhr.open(m,fileName+'&rcode='+Math.random(),async);else xhr.open(m,fileName+'?rcode='+Math.random(),async);}if(xhr.onload) xhr.onload=onLoadFunc;else xhr.onreadystatechange=onLoadFunc;if(m=="POST") xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded;charset=UTF-8');xhr.send(postData);return result;},getJs:function(src,cb){if(!(typeof src=="string" &&(typeof cb=="function"||cb==null)))return false;var s=document.createElement("script");s.type="text/javascript";s.src=src;if(window.ActiveXObject){s.onreadystatechange=function(){if(s.readyState=="complete"||s.readyState=="loaded")cb('loaded');else if(s.readyState=="interactive")cb('E:loading');};}else{s.onload=function(){cb('loaded');};s.onerror=function(){cb('E:loading');};}document.getElementsByTagName("head").item(0).appendChild(s);return true;},extend:function(de,so){for(v in so){if(de[v])continue;de[v]=so[v];}},castFunction:function(str){var f;f=Function(str);if(typeof f !="function"){var n="<div onmousedown=\" "+str+" \"></div>";var ns=document.createElement("div");ns.innerHTML=n;f=ns.childNodes[0].onmousedown;}return f;},addEvent:function(t,h,o,f){if(typeof t !="string"||typeof h !="function")return false;var r=new Object();if(typeof o !="object"||o==null)o=window;if(typeof f !="boolean")f=false;if(o.addEventListener){o.addEventListener(t,h,f);r.type=t;r.attach=false;}else if(o.attachEvent){if(t && t.match(/move|up|selectstart|down/i) && o==window)o=document;o.attachEvent("on"+t,h);r.type="on"+t;r.attach=true;}r.listener=h;r.target=o;r.useCapture=f;return r;},getElementsByDataset:function(ds,v ){var attr,elem,r=new Array(),all=document.getElementsByTagName('*');for(var i=0,j=0;all[ i ];i++){elem=all[ i ];attr=elem.getAttribute('data-'+ds );if(attr ){if(v ){if(attr==v ){r[ j ]=elem;j++;}}else{r[ j ]=elem;j++;}}}return r;},removeEvent:function(t,h,o,f){if(typeof t !="string"||typeof h !="function")return false;var r=new Object();if(typeof o !="object")o=window;if(typeof f !="boolean")f=false;if(o.removeEventListener){o.removeEventListener(t,h,f);r.type=t;r.attach=false;}else if(o.detachEvent){o.detachEvent("on"+t,h);r.type="on"+t;r.attach=true;}},removePx:function(sy){return Number(sy.slice(0,sy.length - 2));},removeChildren:function(elem){var i,len,cnd=elem.childNodes;for(i=0,len=cnd.length;i<len;i++){elem.removeChild(cnd[0]);};},reload:function(type){if(typeof type !="string")return false;if(type=="no-cache") location.reload(true);else if(type=="cache") location.reload(false);},link:function(link,type){if(typeof link !="string"||typeof type !="string")return false;if(type=="href") location.href=link;else if(type=="replace") location.replace(link);},test:function(msg){alert("Message:"+msg);return true;}};return method;};return core;})();var baseInfo={name:"Base Package",version:"1.0",egg:function(a){if(a=="what's")alert('Do you mean "Saneyuki Tadokoro?"')}};sys().addPackage("base",basePackage,baseInfo);var uAgent={browser:(function(){var uAgent=navigator.userAgent;if(uAgent.indexOf("MSIE 6.0") !=-1) return "MSIE 6.0";else if(uAgent.indexOf("MSIE 7.0") !=-1) return "MSIE 7.0";else if(uAgent.indexOf("MSIE 8.0") !=-1) return "MSIE 8.0";else if(uAgent.indexOf("MSIE") !=-1) return "MSIE";else if(uAgent.indexOf("Chrome") !=-1) return "Chrome";else if(uAgent.indexOf("Firefox") !=-1) return "Firefox";else if(uAgent.indexOf("Safari") !=-1) return "Safari";else if(uAgent.indexOf("Opera") !=-1) return "Opera";else if(uAgent.indexOf("Netscape") !=-1) return "Netscape";})(),clientWidth:sys("base").getClientWidth(),clientHeight:sys("base").getClientHeight(),language:"en"};sys("base").addEvent("resize",function(){uAgent.clientWidth=sys("base").getClientWidth();uAgent.clientHeight=sys("base").getClientHeight();});window.gfxt=new Object();window.gfxt.sys=sys;window.gfxt.uAgent=uAgent;})();
/*
 * 	Applied Layer
 * 	  - version 1.0a
 * 	  - Published at http://gfunction.com/
 * 
 * 	Copyright (c) 2011 Saneyuki Tadokoro
 */
(function(gfxt){var appliedLayer=function(src){return new appliedLayer.me.init(src)};appliedLayer.me={init:function(src){if(!src)src=new Object();if(gfxt.sys("appl",src.id).testId()){gfxt.sys("appl",src.id).getController().activate();return false;}if(src.id && typeof src.id=="string")this.id=src.id;else this.id=src.id=gfxt.sys("appl").createId();var als=gfxt.sys("appl",this.id);var sys=gfxt.sys("base");if(!src.theme)src.theme=gfxt.sys().getAccessory("appl").$$.defaultTheme;if(!src.size)src.size="restored";this.setting={sizeLimit:{maxWidth:null,minWidth:null,maxHeight:null,minHeight:null,maxTop:null,minTop:null,maxLeft:null,minLeft:null},sizeControl:{closeable:true,movable:true,resizable:true,maximizable:true,minimizable:true,fixable:true},status:{active:false,control:"new",exist:true}};this.eventBox={wResize:null,activate:new Array(),deactivate:new Array(),resize:new Array(),restore:new Array(),maximize:new Array(),minimize:new Array(),fix:new Array(),unfix:new Array(),close:new Array(),move:new Array()};this.saved=new Object();als.increase();als.addLayer();als.register(this);this.source=src;this.theme=src.theme;this.partCreator=partCreator(this);var pc=this.partCreator;this.controller=controller(this);var co=this.controller;this.manager=manager(this);var mg=this.manager;this.parts=new Object();pc.createBase();pc.createFrame();pc.createResizePoint();pc.createClientArea();pc.createTitleBar();this.parts.titleBar.gxhandle.createCloseButton();co.activate();mg.setMaxWidth(src.maxWidth);mg.setMinWidth(src.minWidth);mg.setWidth(src.width);mg.setMaxHeight(src.maxHeight);mg.setMinHeight(src.minHeight);mg.setHeight(src.height);mg.setMaxTop(src.maxTop);mg.setMinTop(src.minTop);mg.setTop(src.top);mg.setMaxLeft(src.maxLeft);mg.setMinLeft(src.minLeft);mg.setLeft(src.left);if(src.title)this.parts.titleBar.gxhandle.createTitle(src.title);if(src.icon)tibd.createIcon(src.icon);if(src.closable===false)co.disableClose();if(src.movable===false)co.disableMove();if(src.resizable===false)co.disableResize();if(src.maximizable===false)co.disableMaximize();if(src.minimizable===false)co.disableMinimizable();if(src.fixable===false)co.disableFix();if(src.fix===true){co.enableFix();co.fix();}if(src.size=="maximized"){co.maximize();}else if(src.size=="minimized"){co.minimize();}else co.restore();this.eventBox.wResize=sys.addEvent("resize",function(){mg.executeEvent("resize");});return this;}};appliedLayer.me.init.prototype=appliedLayer.me;var partCreator=function(d){return new partCreator.me.init(d)};partCreator.me={init:function(d){this.$d=d;},createBase:function(){var d=this.$d;var pa=d.parts;if(pa.base)return false;var src=d.source;var ba=gfxt.sys("appl",d.id).createBase();if(src.parentElement)src.parentElement.appendChild(ba);else document.body.appendChild(ba);pa.base=ba;return ba;},createFrame:function(){var d=this.$d;var pa=d.parts;if(pa.frame)return false;var fd=gfxt.sys("appl",d.id).createFrame();var ba=pa.base;with(ba){appendChild(fd.upperLeft);appendChild(fd.upper);appendChild(fd.upperRight);appendChild(fd.left);appendChild(fd.right);appendChild(fd.bottomLeft);appendChild(fd.bottom);appendChild(fd.bottomRight);appendChild(fd.center);}pa.frame=fd;return fd;},createTitleBar:function(){var d=this.$d;var pa=d.parts;if(pa.titleBar)return false;var id=d.id;var tib=gfxt.sys("appl",id).createTitleBar();var sys=gfxt.sys("base");var h=hTitleBar(id,tib,d);sys.extend(tib,{gxhandle:h});pa.frame.center.appendChild(tib);pa.titleBar=tib;d.manager.setClientAreaSize();return tib;},createClientArea:function(){var d=this.$d;var pa=d.parts;if(pa.clientArea)return false;var id=d.id;var sys=gfxt.sys("base");var ca=gfxt.sys("appl",id).createClientArea();var h=hClientArea(id,ca);sys.extend(ca,{gxhandle:h});pa.frame.center.appendChild(ca);pa.clientArea=ca;d.manager.setClientAreaSize();return ca;},createResizePoint:function(){var d=this.$d;var pa=d.parts;if(pa.resizePoint)return false;var rpd=gfxt.sys("appl",d.id).createResizePoint();var ba=pa.base;with(ba){appendChild(rpd.upperLeft);appendChild(rpd.upper);appendChild(rpd.upperRight);appendChild(rpd.left);appendChild(rpd.right);appendChild(rpd.bottomLeft);appendChild(rpd.bottom);appendChild(rpd.bottomRight);}pa.resizePoint=rpd;return rpd;},createMenuBar:function(){var d=this.$d;var pa=d.parts;if(pa.menuBar)return false;var id=d.id;var meb=gfxt.sys("appl",id).createMenuBar();var sys=gfxt.sys("base");var h=hMenuBar(id,meb);pa.frame.center.appendChild(meb);pa.menuBar=meb;sys.extend(meb,{gxhandle:h});d.manager.setClientAreaSize();return meb;}};partCreator.me.init.prototype=partCreator.me;var controller=function(d){return new controller.me.init(d)};controller.me={init:function(d){this.$d=d;this.$$=gfxt.sys().getAccessory("appl").$$;},activate:function(){var d=this.$d;var $$=this.$$;var id=d.id;this.deactivate();d.setting.status.active=true;$$.activeWindow=id;gfxt.sys("appl",id).setLayer();d.manager.executeEvent("activate");return true;},deactivate:function(){var d=this.$d;var $$=this.$$;var id=d.id;var aw=$$.registry[$$.activeWindow];if(aw){aw.setting.status.active=false;d.manager.executeEvent("deactivate");}return true;},move:function(x,y){if(!(x && y))return false;var d=this.$d;var ba=d.parts.base;ba.style.left=x+"px";ba.style.top=y+"px";d.manager.executeEvent("move");return false;},fix:function(e){var d=this.$d;if(d.setting.sizeControl.fixable===false)return false;var is=d.source.theme.imgSrc;var pa=d.parts;var ba=pa.base;var fb=pa.fixButton;var sys=gfxt.sys("base");var px=sys.getPageXOffset();var py=sys.getPageYOffset();ba.style.position="fixed";ba.style.left=ba.offsetLeft - px+"px";ba.style.top=ba.offsetTop - py+"px";if(fb){fb.button.onclick=function(e){d.controller.unfix(e);};fb.icon.src=is.unfixButtonImg;}d.manager.executeEvent("fix");return true;},unfix:function(e){var d=this.$d;if(d.setting.sizeControl.fixable===false)return false;var is=d.source.theme.imgSrc;var pa=d.parts;var ba=pa.base;var fb=pa.fixButton;var sys=gfxt.sys("base");var px=sys.getPageXOffset();var py=sys.getPageYOffset();ba.style.position="absolute";ba.style.left=ba.offsetLeft+px+"px";ba.style.top=ba.offsetTop+py+"px";if(fb){fb.button.onclick=function(e){d.controller.fix(e);};fb.icon.src=is.fixButtonImg;}d.manager.executeEvent("unfix");return true;},close:function(e){var d=this.$d;if(d.setting.sizeControl.closeable===false)return false;var sys=gfxt.sys("base");var als=gfxt.sys("appl",d.id);var ba=d.parts.base;var src=d.source;als.deleteLayer();if(src.parentElement)src.parentElement.removeChild(ba);else document.body.removeChild(ba);d.manager.executeEvent("close");sys.removeEvent("resize",d.eventBox.wResize);als.deleteRegister();als.decrease();return true;},maximize:function(e){var d=this.$d;var se=d.setting;if(se.status.control=="maximized"||se.sizeControl.maximizable===false)return false;var is=d.source.theme.imgSrc;var pa=d.parts;var mg=d.manager;var co=d.controller;var s=d.saved;var ba=pa.base;var tb=pa.titleBar;var mb=pa.maximizeButton;if(se.status.control !="restored")co.restore();s.baseWidth=ba.offsetWidth;s.baseHeight=ba.offsetHeight;s.baseTop=ba.offsetTop;s.baseLeft=ba.offsetLeft;mg.setWidth("100%");mg.setHeight("100%");mg.setTop(0);mg.setLeft(0);co.disableResize();if(tb){tb.onmousedown=function(e){};tb.ondblclick=function(e){co.restore(e);};}if(mb){mb.button.onclick=function(e){co.restore(e);};mb.icon.src=is.restoreButtonImg;}se.status.control="maximized";mg.executeEvent("resize");mg.executeEvent("maximize");return true;},minimize:function(e){var d=this.$d;var se=d.setting;if(se.status.control=="minimized"||se.sizeControl.minimizable===false)return false;var is=d.source.theme.imgSrc;var pa=d.parts;var s=d.saved;var mg=d.manager;var co=d.controller;var ba=pa.base;var tb=pa.titleBar;var mi=pa.minimizeButton;var ma=pa.maximizeButton;var c=se.status.control;if(c !="restored")co.restore();if(c=="restored" && mi){mi.button.onclick=function(e){co.restore(e);};}else if(c=="maximized" && mi){mi.button.onclick=function(e){co.maximize(e);};}if(tb){tb.ondblclick=function(e){co.maximize(e);};}if(ma){ma.button.onclick=function(e){co.maximize(e);};}s.baseWidth=ba.offsetWidth;s.baseHeight=ba.offsetHeight;co.disableResize();mg.setWidth(se.sizeLimit.minWidth);mg.setHeight(ba.offsetHeight - pa.clientArea.offsetHeight);se.status.control="minimized";mg.executeEvent("resize");mg.executeEvent("minimize");return true;},restore:function(e){var d=this.$d;var se=d.setting;if(se.status.control=="resotred")return false;var is=d.source.theme.imgSrc;var pa=d.parts;var s=d.saved;var co=d.controller;var mg=d.manager;var ba=pa.base;var tib=pa.titleBar;var mi=pa.minimizeButton;var ma=pa.maximizeButton;if(se.status.control=="new"){se.status.control="restored";return true;}if(mi){mi.button.onclick=function(e){co.minimize(e);};}if(ma){ma.button.onclick=function(e){co.maximize(e);};ma.icon.src=is.maximizeButtonImg;}if(tib){tib.onmousedown=function(e){mg.setMovable(e);};tib.ondblclick=function(e){co.maximize(e);};}mg.setWidth(s.baseWidth);mg.setHeight(s.baseHeight);mg.setTop(s.baseTop);mg.setLeft(s.baseLeft);se.status.control="restored";co.enableResize();mg.executeEvent("resize");mg.executeEvent("restore");return true;},renameTitle:function(t){if(!t||typeof t !="string")t=gfxt.sys().getPackage("appl").$$.defaultTitle;this.$d.parts.title.innerHTML=t;},disableClose:function(){var sc=this.$d.setting.sizeControl;if(sc.closable===true)sc.closable=false;},enableClose:function(){var sc=this.$d.setting.sizeControl;if(sc.closable===true)sc.closable=false;},disableMove:function(){var sc=this.$d.setting.sizeControl;if(sc.movable===true)sc.movable=false;},enableMove:function(){var sc=this.$d.setting.sizeControl;if(sc.movable===false)sc.movable=true;},disableFix:function(){var sc=this.$d.setting.sizeControl;if(sc.fixable===true)sc.fixable=false;},enableFix:function(){var sc=this.$d.setting.sizeControl;if(sc.fixable===false)sc.fixable=true;},disableMaximize:function(){var sc=this.$d.setting.sizeControl;if(sc.maximizable===true)sc.maximizable=false;},enableMaximize:function(){var sc=this.$d.setting.sizeControl;if(sc.maximizable===false)sc.maximizable=true;},disableMinimize:function(){var sc=this.$d.setting.sizeControl;if(sc.minimizable===true)sc.minimizable=false;},enableMinimize:function(){var sc=this.$d.setting.sizeControl;if(sc.minimizable===false)sc.minimizable=true;},disableResize:function(){var sc=this.$d.setting.sizeControl;if(sc.resizable===true)sc.resizable=false;},enableResize:function(){var sc=this.$d.setting.sizeControl;if(sc.resizable===false)sc.resizable=true;},enableCloseButton:function(){var d=this.$d;var cb=d.parts.closeButton;if(!cb||cb.button.gxstatus=="enabled")return false;var is=d.theme.imgSrc.closeButtonImg;cb.button.gxstatus="enabled";cb.icon.src=is;},disableCloseButton:function(){var d=this.$d;var cb=d.parts.closeButton;if(!cb||cb.button.gxstatus=="disabled")return false;var is=d.theme.imgSrc.disabledCloseButtonImg;cb.button.gxstatus="disabled";cb.icon.src=is;},enableMaximizeButton:function(){var d=this.$d;var mb=d.parts.maximizeButton;if(!mb||mb.button.gxstatus=="enabled")return false;var is=d.theme.imgSrc.maximizeButtonImg;mb.button.gxstatus="enabled";mb.icon.src=is;},disableMaximizeButton:function(){var d=this.$d;var mb=d.parts.maximizeButton;if(!mb||mb.button.gxstatus=="disabled")return false;var is=d.theme.imgSrc.disabledMaximizeButtonImg;mb.button.gxstatus="disabled";mb.icon.src=is;},enableMinimizeButton:function(){var d=this.$d;var ib=d.parts.minimizeButton;if(!ib||ib.button.gxstatus=="enabled")return false;var is=d.theme.imgSrc.minimizeButtonImg;ib.button.gxstatus="enabled";ib.icon.src=is;},disableMinimizeButton:function(){var d=this.$d;var ib=d.parts.minimizeButton;if(!ib||ib.button.gxstatus=="disabled")return false;var is=d.theme.imgSrc.disabledMinimizeButtonImg;ib.button.gxstatus="disabled";ib.icon.src=is;},enableFixButton:function(){var d=this.$d;var fb=d.parts.fixButton;if(!fb||fb.button.gxstatus=="enabled")return false;var is=d.theme.imgSrc.fixButtonImg;fb.button.gxstatus="enabled";fb.icon.src=is;},disableFixButton:function(){var d=this.$d;var fb=d.parts.fixButton;if(!fb||fb.button.gxstatus=="disabled")return false;var is=d.theme.imgSrc.disabledFixButtonImg;fb.button.gxstatus="disabled";fb.icon.src=is;},resizeUpperLeft:function(e){var d=this.$d;var s=d.saved;var mg=d.manager;var sx=s.startEventX;var sy=s.startEventY;var ex=e.pageX?e.pageX:event.x;var ey=e.pageY?e.pageY:event.y;var w=s.startWidth+(sx - ex);var h=s.startHeight+(sy - ey);var t=s.startTop -(sy - ey);var l=s.startLeft -(sx - ex);if(mg.setWidth(w)) mg.setLeft(l);if(mg.setHeight(h)) mg.setTop(t);mg.executeEvent("resize");return false;},resizeUpper:function(e){var d=this.$d;var s=d.saved;var mg=d.manager;var ey=e.pageY?e.pageY:event.y;var h=s.startHeight+(s.startEventY - ey);var t=s.startTop -(s.startEventY - ey);if(mg.setHeight(h)) mg.setTop(t);mg.executeEvent("resize");return false;},resizeUpperRight:function(e){var d=this.$d;var s=d.saved;var mg=d.manager;var sy=s.startEventY;var ex=e.pageX?e.pageX:event.x;var ey=e.pageY?e.pageY:event.y;var h=s.startHeight+(sy - ey);var w=s.startWidth -(s.startEventX - ex);var t=s.startTop -(sy - ey);if(mg.setHeight(h)) mg.setTop(t);mg.setWidth(w);mg.executeEvent("resize");return false;},resizeLeft:function(e){var d=this.$d;var s=d.saved;var mg=d.manager;var sx=s.startEventX;var ex=e.pageX?e.pageX:event.x;var w=s.startWidth+(sx - ex);var l=s.startLeft -(sx - ex);if(mg.setWidth(w)) mg.setLeft(l);mg.executeEvent("resize");return false;},resizeRight:function(e){var d=this.$d;var s=d.saved;var mg=d.manager;var ex=e.pageX?e.pageX:event.x;var w=s.startWidth -(s.startEventX - ex);mg.setWidth(w);mg.executeEvent("resize");return false;},resizeBottomLeft:function(e){var d=this.$d;var s=d.saved;var mg=d.manager;var sx=s.startEventX;var ex=e.pageX?e.pageX:event.x;var ey=e.pageY?e.pageY:event.y;var h=s.startHeight -(s.startEventY - ey);var w=s.startWidth+(sx - ex);var l=s.startLeft -(sx - ex);if(mg.setWidth(w)) mg.setLeft(l);mg.setHeight(h);mg.executeEvent("resize");return false;},resizeBottom:function(e){var d=this.$d;var s=d.saved;var mg=d.manager;var ey=e.pageY?e.pageY:event.y;var h=s.startHeight -(s.startEventY - ey);mg.setHeight(h);mg.executeEvent("resize");return false;},resizeBottomRight:function(e){var d=this.$d;var s=d.saved;var mg=d.manager;var ex=e.pageX?e.pageX:event.x;var ey=e.pageY?e.pageY:event.y;var h=s.startHeight -(s.startEventY - ey);var w=s.startWidth -(s.startEventX - ex);mg.setHeight(h);mg.setWidth(w);mg.executeEvent("resize");return false;}};controller.me.init.prototype=controller.me;var manager=function(d){return new manager.me.init(d)};manager.me={init:function(d){this.$d=d;this.$$=gfxt.sys().getAccessory("appl").$$;},executeEvent:function(t){var i;var e=this.$d.eventBox;if(t=="resize"){for(i=0;e.resize[i];i++)e.resize[i]();}else if(t=="restore"){for(i=0;e.restore[i];i++)e.restore[i]();}else if(t=="maximize"){for(i=0;e.maximize[i];i++)e.maximize[i]();}else if(t=="minimize"){for(i=0;e.minimize[i];i++)e.minimize[i]();}else if(t=="fix"){for(i=0;e.fix[i];i++)e.fix[i]();}else if(t=="unfix"){for(i=0;e.unfix[i];i++)e.unfix[i]();}else if(t=="move"){for(i=0;e.move[i];i++)e.move[i]();}else if(t=="close"){for(i=0;e.close[i];i++)e.close[i]();}else if(t=="activate"){for(i=0;e.activate[i];i++)e.activate[i]();}else if(t=="deactivate"){for(i=0;e.deactivate[i];i++)e.deactivate[i]();}},addEvent:function(t,h){var e=this.$d.eventBox;if(t=="resize")e.resize[e.resize.length]=h;else if(t=="restore")e.restore[e.restore.length]=h;else if(t=="maximize")e.maximize[e.maximize.length]=h;else if(t=="minimize")e.minimize[e.minimize.length]=h;else if(t=="fix")e.fix[e.fix.length]=h;else if(t=="unfix")e.unfix[e.unfix.length]=h;else if(t=="close")e.close[e.close.length]=h;else if(t=="move")e.move[e.move.length]=h;else if(t=="activate")e.activate[e.activate.length]=h;else if(t=="deactivate")e.deactivate[e.deactivate.length]=h;return h;},removeEvent:function(t,h){var i;var e=this.$d.eventBox;if(t=="resize"){for(i=0;e.resize[i];i++){if(e.resize[i]==h) e.resize.splice(i,1);}}else if(t=="restore"){for(i=0;e.restore[i];i++){if(e.restore[i]==h) e.restore.splice(i,1);}}else if(t=="maximize"){for(i=0;e.maximize[i];i++){if(e.maximzie[i]==h) e.maximize.splice(i,1);}}else if(t=="minimize"){for(i=0;e.minimize[i];i++){if(e.minimize[i]==h) e.minimize.splice(i,1);}}else if(t=="fix"){for(i=0;e.fix[i];i++){if(e.fix[i]==h) e.fix.splice(i,1);}}else if(t=="move"){for(i=0;e.move[i];i++){if(e.move[i]==h) e.move.splice(i,1);}}else if(t=="close"){for(i=0;e.close[i];i++){if(e.close[i]==h) e.close.splice(i,1);}}else if(t=="move"){for(i=0;e.close[i];i++){if(e.move[i]==h) e.move.splice(i,1);}}else if(t=="activate"){for(i=0;e.activate[i];i++){if(e.activate[i]==h) e.activate.splice(i,1);}}else if(t=="deactivate"){for(i=0;e.deactivate[i];i++){if(e.deactivate[i]==h) e.deactivate.splice(i,1);}}},setMovable:function(e){var d=this.$d;if(d.setting.sizeControl.movable===false)return false;var id=d.id;var ba=d.parts.base;var als=gfxt.sys("appl",id);var sys=gfxt.sys("base");var sx=e?e.pageX:event.clientX+document.body.scrollLeft;var sy=e?e.pageY:event.clientY+document.body.scrollTop;var ox=ba.offsetLeft;var oy=ba.offsetTop;d.controller.activate();d.status="movable";var r1=sys.addEvent("selectstart",function(){return false;},window);var r2=sys.addEvent("mousemove",function(ee){var x=ee.pageX?ee.pageX:event.clientX+document.body.scrollLeft;var y=ee.pageY?ee.pageY:event.clientY+document.body.scrollTop;x=ox -(sx - x);y=oy -(sy - y);d.controller.move(x,y);},window);var r3=sys.addEvent("mouseup",function(){sys.removeEvent("selectstart",r1.listener,r1.target);sys.removeEvent("mousemove",r2.listener,r2.target);sys.removeEvent("mouseup",r3.listener,r3.target);});return true;},setResizable:function(t,e){var d=this.$d;if(d.setting.sizeControl.resizable===false)return false;var lis;var id=d.id;var ba=d.parts.base;var s=d.saved;var co=d.controller;var als=gfxt.sys("appl",id);var sys=gfxt.sys("base");var sx=e?e.pageX:event.x;var sy=e?e.pageY:event.y;s.startEventX=sx;s.startEventY=sy;s.startLeft=ba.offsetLeft;s.startTop=ba.offsetTop;s.startWidth=ba.offsetWidth;s.startHeight=ba.offsetHeight;if(t=="upper-left") lis=function(e){co.resizeUpperLeft(e)};else if(t=="upper") lis=function(e){co.resizeUpper(e)};else if(t=="upper-right")lis=function(e){co.resizeUpperRight(e)};else if(t=="left") lis=function(e){co.resizeLeft(e)};else if(t=="right") lis=function(e){co.resizeRight(e)};else if(t=="bottom-left")lis=function(e){co.resizeBottomLeft(e)};else if(t=="bottom") lis=function(e){co.resizeBottom(e)};else if(t=="bottom-right")lis=function(e){co.resizeBottomRight(e)};var r1=sys.addEvent("selectstart",function(){return false;});var r2=sys.addEvent("mousemove",lis);var r3=sys.addEvent("mouseup",function(){sys.removeEvent("selectstart",r1.listener,r1.target);sys.removeEvent("mousemove",r2.listener,r2.target);sys.removeEvent("mouseup",r3.listener,r3.target);});},setIcon:function(src){var d=this.$d;if(!src||typeof src !="string"||src=="default")src=d.source.theme.imgSrc.defaultIcon;d.parts.icon.src=src;},setClientAreaSize:function(){var tibh,mebh;var pa=this.$d.parts;var ca=pa.clientArea;var tib=pa.titleBar;var meb=pa.menuBar;if(!tib)tibh=0;else tibh=tib.offsetHeight;if(!meb)mebh=0;else mebh=meb.offsetHeight;if(!ca)return false;else ca.style.top=tibh+mebh+"px";},setWidth:function(w){var d=this.$d;var $$=this.$$;var sl=d.setting.sizeLimit;var mg=d.manager;var ba=d.parts.base;var maxw=sl.maxWidth;var minw=sl.minWidth;if(typeof w !="number" && w !="100%"){ba.style.width=$$.defaultWidth+"px";return false;}if(!((maxw=="unlimited"||w<=maxw||w=="100%") &&(minw=="unlimited"||w>=minw||w=="100%")))return false;if(w=="100%")ba.style.width=w;else ba.style.width=w+"px";mg.setClientAreaSize();return true;},setHeight:function(h){var d=this.$d;var $$=this.$$;var sl=d.setting.sizeLimit;var mg=d.manager;var ba=d.parts.base;var maxh=sl.maxWidth;var minh=sl.minHeight;if(typeof h !="number" && h !="100%"){ba.style.height=$$.defaultHeight+"px";return false;}if(!((maxh=="unlimited"||h<=maxh||h=="100%") &&(minh=="unlimited"||h>=minh||h=="100%")))return false;if(h=="100%")ba.style.height=h;else ba.style.height=h+"px";mg.setClientAreaSize();return true;},setTop:function(t){var d=this.$d;var $$=this.$$;var sl=d.setting.sizeLimit;var mg=d.manager;var ba=d.parts.base;var maxt=sl.maxTop;var mint=sl.minTop;if(typeof t !="number"){ba.style.top=$$.defaultTop+"px";return false;}if(!((maxt=="unlimited"||t<=maxt) &&(mint=="unlimited"||t>=mint)))return false;ba.style.top=t+"px";return true;},setLeft:function(l){var d=this.$d;var $$=this.$$;var sl=d.setting.sizeLimit;var mg=d.manager;var ba=d.parts.base;var maxl=sl.maxLeft;var minl=sl.minLeft;if(typeof l !="number"){ba.style.left=$$.defaultLeft+"px";return false;}if(!((maxl=="unlimited"||l<=maxl) &&(minl=="unlimited"||l>=minl)))return false;ba.style.left=l+"px";return true;},setMaxWidth:function(maxw){if(!maxw)maxw=this.$$.defaultMaxWidth;this.$d.setting.sizeLimit.maxWidth=maxw;},setMinWidth:function(minw){if(!minw)minw=this.$$.defaultMinWidth;this.$d.setting.sizeLimit.minWidth=minw;},setMaxHeight:function(maxh){if(!maxh)maxh=this.$$.defaultMaxHeight;this.$d.setting.sizeLimit.maxHeight=maxh;},setMinHeight:function(minh){if(!minh)minh=this.$$.defaultMinHeight;this.$d.setting.sizeLimit.minHeight=minh;},setMaxTop:function(maxt){if(!maxt)maxt=this.$$.defaultMaxTop;this.$d.setting.sizeLimit.maxTop=maxt;},setMinTop:function(mint){if(!mint)mint=this.$$.defaultMinTop;this.$d.setting.sizeLimit.minTop=mint;},setMaxLeft:function(maxl){if(!maxl)maxl=this.$$.defaultMaxLeft;this.$d.setting.sizeLimit.maxLeft=maxl;},setMinLeft:function(minl){if(!minl)minl=this.$$.defaultMinLeft;this.$d.setting.sizeLimit.minLeft=minl;},getLayer:function(){return this.$$.windowLayer[this.$d.id];},getWidth:function(){return this.$d.object.base.offsetWidth;},getHeight:function(){return this.$d.object.base.offsetHeight;},getTop:function(){return this.$d.object.base.offsetTop;},getLeft:function(){return this.$d.object.base.offsetLeft;},getSource:function(){return this.$d.source;},getTheme:function(){return this.$d.theme;},getParts:function(){return this.$d.parts;},getEventBox:function(){return this.$d.eventBox;},getBaseObject:function(){return this.$d.baseObject;},getPartCreator:function(){return this.$d.partCreator;},getController:function(){return this.$d.controller;},getManager:function(){return this.$d.manager;},getSetting:function(){return this.$d.setting;},getSaved:function(){return this.$d.saved;},getStatus:function(){return this.$d.status;}};manager.me.init.prototype=manager.me;var hTitleBar=function(id,tib,d){return new hTitleBar.me.init(id,tib,d)};hTitleBar.me={init:function(id,tib,d){this.id=id;this.titleBar=tib;this.$$=d;},createCloseButton:function(){if(this.$$.parts.closeButton)return false;var id=this.$$.id;var cbd=gfxt.sys("appl",id).createCloseButton();this.$$.parts.closeButton=cbd;this.$$.parts.base.appendChild(cbd.button);return cbd;},createMaximizeButton:function(){if(this.$$.parts.maximizeButton)return false;var id=this.$$.id;var mabd=gfxt.sys("appl",id).createMaximizeButton();this.$$.parts.maximizeButton=mabd;this.$$.parts.base.appendChild(mabd.button);return mabd;},createMinimizeButton:function(){if(this.$$.parts.minimizeButton)return false;var id=this.$$.id;var mibd=gfxt.sys("appl",id).createMinimizeButton();this.$$.parts.minimizeButton=mibd;this.$$.parts.base.appendChild(mibd.button);return mibd;},createFixButton:function(){if(this.$$.parts.fixButton)return false;var id=this.$$.id;var fbd=gfxt.sys("appl",id).createFixButton();this.$$.parts.fixButton=fbd;this.$$.parts.base.appendChild(fbd.button);return fbd;},createIcon:function(is){if(this.$$.parts.icon)return false;var id=this.$$.id;var ic=gfxt.sys("appl",id).createIcon();this.$$.parts.icon=ic;this.$$.parts.titleBar.appendChild(ic);this.$$.manager.setIcon(is);return ic;},createTitle:function(tit){if(this.$$.parts.title)return false;var id=this.$$.id;var ti=gfxt.sys("appl",id).createTitle();this.$$.parts.title=ti;this.$$.parts.titleBar.appendChild(ti);this.$$.controller.renameTitle(tit);return ti;}};hTitleBar.me.init.prototype=hTitleBar.me;var hClientArea=function(id,ca){return new hClientArea.me.init(id,ca)};hClientArea.me={init:function(id,ca){this.id=id;this.clientArea=ca;},createStyleFrame:function(){var mgr=gfxt.sys("appl",this.id).getManager();var ca=this.clientArea;var sfd=gfxt.styleFrame();var sf=sfd.styleFrame;mgr.addEvent("resize",function(){sf.gxhandle.refresh();});ca.appendChild(sf);return sfd;}};hClientArea.me.init.prototype=hClientArea.me;var hMenuBar=function(id,meb){return new hMenuBar.me.init(id,meb)};hMenuBar.me={init:function(id,meb){this.id=id;this.menuBar=meb;},createMenuButton:function(la){var id=this.id;var meb=this.menuBar;var als=gfxt.sys("appl",id);var sys=gfxt.sys("base");var mebn=als.createMenuButton();var txt=document.createTextNode(la);var h=hMenuButton(id,mebn);meb.appendChild(mebn);mebn.appendChild(txt);sys.extend(mebn,{gxhandle:h});h.deactivate();mebn.onclick=function(){mebn.gxhandle.activate(mebn.offsetLeft,meb.offsetTop+mebn.offsetTop+mebn.offsetHeight);};return mebn;},removeMenuButton:function(mebn){var meb=this.menuBar;meb.removeChild(mebn);}};hMenuBar.me.init.prototype=hMenuBar.me;var hMenuButton=function(id,mebn){return new hMenuButton.me.init(id,mebn)};hMenuButton.me={init:function(id,mebn){this.id=id;this.menuButton=mebn;},createMenu:function(){var id=this.id;var als=gfxt.sys("appl",id);var sys=gfxt.sys("base");var me=als.createMenu();var h=hMenu(id,me);sys.extend(me,{gxhandle:h});this.menu=me;return me;},activate:function(x,y){var als=gfxt.sys("appl",this.id);var fc=als.getParts().frame.center;this.menu.gxhandle.activate(x,y,fc);},deactivate:function(){}};hMenuButton.me.init.prototype=hMenuButton.me;var hMenu=function(id,me){return new hMenu.me.init(id,me)};hMenu.me={init:function(id,me){this.id=id;this.menu=me;},createMenuItem:function(it,la,func){var id=this.id;var me=this.menu;var als=gfxt.sys("appl",id);var sys=gfxt.sys("base");var oi=als.createId();var mid=als.createMenuItem();var mi=mid.menuItem;var lai=mid.label;var ii=mid.icon;var txt=document.createTextNode(la);lai.appendChild(txt);me.appendChild(mi);mi.onmousedown=function(){func();};return mid;},removeMenuItem:function(mi){var me=this.menu;me.removeChild(mi);},activate:function(x,y,into){var d=this;var me=this.menu;var sys=gfxt.sys("base");var r=sys.addEvent("mousedown",function(){d.deactivate();sys.removeEvent("mousedown",r.listener);});if(into)into.appendChild(me);else document.body.appendChild(me);me.style.top=y+"px";me.style.left=x+"px";},deactivate:function(){var me=this.menu;if(me.parentNode)me.parentNode.removeChild(me);else document.body.removeChild(me);}};hMenu.me.init.prototype=hMenu.me;var applPackage=(function(){var core=function(){var ID=null;var method={handler:function(pn,id){ID=id;},createBase:function(){var $$=gfxt.sys().getAccessory("appl").$$;var sys=gfxt.sys("base");var id=ID;var cn=method.getTheme().className;var ba=document.createElement("div");ba.className=cn.base;ba.style.zIndex=$$.defaultZIndex;sys.addEvent("mousedown",function(){gfxt.sys("appl",id).getController().activate();},ba);return ba;},createFrame:function(){var cn=method.getTheme().className;var fd=new Object();fd.upperLeft=document.createElement("div");fd.upperLeft.className=cn.upperLeftFrame;fd.upper=document.createElement("div");fd.upper.className=cn.upperFrame;fd.upperRight=document.createElement("div");fd.upperRight.className=cn.upperRightFrame;fd.left=document.createElement("div");fd.left.className=cn.leftFrame;fd.center=document.createElement("div");fd.center.className=cn.centerFrame;fd.right=document.createElement("div");fd.right.className=cn.rightFrame;fd.bottomLeft=document.createElement("div");fd.bottomLeft.className=cn.bottomLeftFrame;fd.bottom=document.createElement("div");fd.bottom.className=cn.bottomFrame;fd.bottomRight=document.createElement("div");fd.bottomRight.className=cn.bottomRightFrame;return fd;},createTitleBar:function(){var sys=gfxt.sys("base");var id=ID;var cn=method.getTheme().className;var md=method.createMenu();var h=hMenu(id,md);var tib=tib=document.createElement("div");tib.className=cn.titleBar;tib.onmousedown=function(e){gfxt.sys("appl",id).getManager().setMovable(e);};tib.ondblclick=function(e){gfxt.sys("appl",id).getController().maximize(e);};tib.oncontextmenu=function(e){var ex=e?e.pageX:event.x;var ey=e?e.pageY:event.y;md.menu.style.zIndex="100";md.activate(ex,ey);return false;};sys.extend(md,h);md.createMenuItem("","Close",function(){gfxt.sys("appl",id).getController().close();});return tib;},createClientArea:function(){var cn=method.getTheme().className;var ca=document.createElement("div");ca.className=cn.clientArea;ca.objectType="client-area";return ca;},createResizePoint:function(){var id=ID;var cn=method.getTheme().className;var rpd=new Object();var h=function(ty,e){gfxt.sys("appl",id).getManager().setResizable(ty,e);};rpd.upperLeft=document.createElement("div");rpd.upperLeft.className=cn.upperLeftResizingPoint;rpd.upperLeft.onmousedown=function(e){h("upper-left",e);};rpd.upper=document.createElement("div");rpd.upper.className=cn.upperResizingPoint;rpd.upper.onmousedown=function(e){h("upper",e);};rpd.upperRight=document.createElement("div");rpd.upperRight.className=cn.upperRightResizingPoint;rpd.upperRight.onmousedown=function(e){h("upper-right",e);};rpd.left=document.createElement("div");rpd.left.className=cn.leftResizingPoint;rpd.left.onmousedown=function(e){h("left",e);};rpd.right=document.createElement("div");rpd.right.className=cn.rightResizingPoint;rpd.right.onmousedown=function(e){h("right",e);};rpd.bottomLeft=document.createElement("div");rpd.bottomLeft.className=cn.bottomLeftResizingPoint;rpd.bottomLeft.onmousedown=function(e){h("bottom-left",e);};rpd.bottom=document.createElement("div");rpd.bottom.className=cn.bottomResizingPoint;rpd.bottom.onmousedown=function(e){h("bottom",e);};rpd.bottomRight=document.createElement("div");rpd.bottomRight.className=cn.bottomRightResizingPoint;rpd.bottomRight.onmousedown=function(e){h("bottom-right",e);};return rpd;},createMenuBar:function(){var cn=method.getTheme().className;var meb=document.createElement("div");meb.className=cn.menuBar;return meb;},createMenuButton:function(){var cn=method.getTheme().className;var mb=document.createElement("div");mb.className=cn.menuButton;return mb;},createIcon:function(){var cn=method.getTheme().className;var ic=document.createElement("img");ic.className=cn.icon;return ic;},createTitle:function(){var cn=method.getTheme().className;var ti=document.createElement("span");ti.className=cn.title;return ti;},createCloseButton:function(){var id=ID;var cn=method.getTheme().className;var is=method.getTheme().imgSrc;var cbd=new Object();var bn=cbd.button=document.createElement("div");bn.className=cn.closeButton;bn.onmousedown=function(e){gfxt.sys("appl",id).getController().close(e);};var ic=cbd.icon=document.createElement("img");ic.className=cn.controlButtonImg;ic.src=is.closeButtonImg;ic.alt="";bn.appendChild(ic);return cbd;},createMaximizeButton:function(){var id=ID;var cn=method.getTheme().className;var is=method.getTheme().imgSrc;var mabd=new Object();var bn=mabd.button=document.createElement("div");bn.className=cn.maximizeButton;bn.onclick=function(e){gfxt.sys("appl",id).getController().maximize(e);};var ic=mabd.icon=document.createElement("img");ic.className=cn.controlButtonImg;ic.src=is.maximizeButtonImg;ic.alt="";bn.appendChild(ic);return mabd;},createMinimizeButton:function(){var id=ID;var cn=method.getTheme().className;var is=method.getTheme().imgSrc;var mibd=new Object();var bn=mibd.button=document.createElement("div");bn.className=cn.minimizeButton;bn.onclick=function(e){gfxt.sys("appl",id).getController().minimize(e);};var ic=mibd.icon=document.createElement("img");icclassName=cn.controlButtonImg;ic.src=is.minimizeButtonImg;ic.alt="";bn.appendChild(ic);return mibd;},createFixButton:function(){var id=ID;var cn=method.getTheme().className;var is=method.getTheme().imgSrc;var fbd=new Object();var bn=fbd.button=document.createElement("div");bn.className=cn.fixButton;bn.onclick=function(e){gfxt.sys("appl",id).getController().fix(e);};var ic=fbd.icon=document.createElement("img");ic.className=cn.controlButtonImg;ic.src=is.fixButtonImg;ic.alt="";bn.appendChild(ic);return fbd;},createMenuItem:function(){var cn=method.getTheme().className;var mid=new Object();var mi=mid.menuItem=document.createElement("tr");mi.className=cn.menuItem;var i=mid.icon=document.createElement("td");i.className=cn.menuItemIcon;mi.appendChild(i);var la=mid.label=document.createElement("td");la.className=cn.menuItemLabel;mi.appendChild(la);return mid;},createMenu:function(){var cn=method.getTheme().className;var me=document.createElement("table");me.className=cn.menu;me.cellPadding=0;me.cellSpacing=0;return me;},setLayer:function(){var $$=gfxt.sys().getAccessory("appl").$$;var count,setCount,limit,saveActive,base;var windowLayer=$$.windowLayer;for(count=0;windowLayer[count] !=null;count++){if(windowLayer[count]==ID && count==0) return;else if(windowLayer[count]==ID){saveActive=windowLayer[count];setCount=count;break;}}for(;setCount - 1>=0;setCount--){$$.windowLayer[setCount]=windowLayer[setCount - 1];}windowLayer[0]=saveActive;count=windowLayer.length;for(setCount=0;setCount<windowLayer.length;setCount++,count--){base=gfxt.sys("appl",windowLayer[count - 1]).getParts().base;base.style.zIndex=setCount+$$.defaultZIndex;}},addLayer:function(){var $$=gfxt.sys().getAccessory("appl").$$;$$.windowLayer.push(ID);},deleteLayer:function(){var $$=gfxt.sys().getAccessory("appl").$$;method.getController().activate();$$.windowLayer.shift();},testId:function(){var $$=gfxt.sys().getAccessory("appl").$$;var id=ID;if(typeof id !="string")return false;var r=false;if($$.registry[id])r=true;return r;},deleteRegister:function(){var $$=gfxt.sys().getAccessory("appl").$$;delete $$.registry[ID];},getActiveWindowId:function(){var $$=gfxt.sys().getAccessory("appl").$$;return $$.activeWindow;},getData:function(){var $$=gfxt.sys().getAccessory("appl").$$;return $$.registry[ID];},getSource:function(){var $$=gfxt.sys().getAccessory("appl").$$;return $$.registry[ID].source;},getTheme:function(){var $$=gfxt.sys().getAccessory("appl").$$;return $$.registry[ID].theme;},getParts:function(){var $$=gfxt.sys().getAccessory("appl").$$;return $$.registry[ID].parts;},getBaseCreator:function(){var $$=gfxt.sys().getAccessory("appl").$$;return $$.registry[ID].baseCreator;},getController:function(){var $$=gfxt.sys().getAccessory("appl").$$;return $$.registry[ID].controller;},getManager:function(){var $$=gfxt.sys().getAccessory("appl").$$;return $$.registry[ID].manager;},getSetting:function(){var $$=gfxt.sys().getAccessory("appl").$$;return $$.registry[ID].setting;},getSaved:function(){var $$=gfxt.sys().getAccessory("appl").$$;return $$.registry[ID].saved;},getStatus:function(){var $$=gfxt.sys().getAccessory("appl").$$;return $$.registry[ID].status;},increase:function(){var $$=gfxt.sys().getAccessory("appl").$$;$$.windowLength++;},decrease:function(){var $$=gfxt.sys().getAccessory("appl").$$;$$.windowLength--;},register:function(data){var $$=gfxt.sys().getAccessory("appl").$$;$$.registry[ID]=data;},createId:function(){return String((new Date()).getTime()+Math.round(Math.random() * 10000));}};return method;};return core;})();var applInfo={name:"Applied Layer Package",version:"1.0",egg:function(a){if(a=="ready")alert("Sorry,Saneyuki Tadokoro is not still ready for eating eggs:(")}};gfxt.sys().addPackage("appl",applPackage,applInfo);gfxt.sys().getAccessory("appl").$$={windowLength:0,windowLayer:new Array(),activeWindow:null,registry:new Object(),defaultTitle:"Untitled",defaultMinWidth:200,defaultMaxWidth:"unlimited",defaultMinHeight:145,defaultMaxHeight:"unlimited",defaultMinTop:"unlimited",defaultMaxTop:"unlimited",defaultMinLeft:"unlimited",defaultMaxLeft:"unlimited",defaultWidth:gfxt.uAgent.clientWidth/2,defaultHeight:gfxt.uAgent.clientHeight/2,defaultTop:0,defaultLeft:0,defaultZIndex:10,defaultTheme:{themeName:"Applied-Layer-Default-Theme",themeCss:"gfxt/client/applied-layer/css/window.css",className:{base:"appl-base",titleBar:"appl-title-bar",menuBar:"appl-menu-bar",menu:"appl-menu",menuButton:"appl-menu-button",menuItem:"appl-menu-item",menuItemIcon:"appl-menu-item-icon",menuItemLabel:"appl-menu-item-label",clientArea:"appl-client-area",title:"appl-title",icon:"appl-icon",closeButton:"appl-close-button",maximizeButton:"appl-maximize-button",minimizeButton:"appl-minimize-button",fixButton:"appl-fix-button",controlButtonImg:"appl-control-button-img",frame:"appl-frame",upperLeftFrame:"appl-frame-upper-left",upperFrame:"appl-frame-upper",upperRightFrame:"appl-frame-upper-right",leftFrame:"appl-frame-left",centerFrame:"appl-frame-center",rightFrame:"appl-frame-right",bottomLeftFrame:"appl-frame-bottom-left",bottomFrame:"appl-frame-bottom",bottomRightFrame:"appl-frame-bottom-right",upperLeftResizingPoint:"appl-resize-point-upper-left",upperResizingPoint:"appl-resize-point-upper",upperRightResizingPoint:"appl-resize-point-upper-right",leftResizingPoint:"appl-resize-point-left",rightResizingPoint:"appl-resize-point-right",bottomLeftResizingPoint:"appl-resize-point-bottom-left",bottomResizingPoint:"appl-resize-point-bottom",bottomRightResizingPoint:"appl-resize-point-bottom-right"},imgSrc:{defaultIcon:"packages/applied-layer/img/default.png",closeButtonImg:"packages/applied-layer/img/close.gif",disabledCloseButtonImg:"packages/applied-layer/img/disabled-close.gif",maximizeButtonImg:"packages/applied-layer/img/maximize.gif",disabledMaximizeButtonImg:"packages/applid-layer/img/disabled-maximize.gif",fixButtonImg:"packages/applied-layer/img/fix.gif",disabledFixButtonImg:"packages/applied-layer/img/disabled-fix.gif",restoreButtonImg:"packages/applied-layer/img/restore.gif",unfixButtonImg:"packages/applied-layer/img/unfix.gif",minimizeButtonImg:"packages/applied-layer/img/minimize.gif",disabledMinimizeButtonImg:"packages/applied-layer/img/disabled-minimize.gif"}}};gfxt.appliedLayer=appliedLayer;})(gfxt);
/*
 *  Web template & Initialization for Twitter Search
 * 	  - version 1.0a
 *  
 *  Copyright (c) 2011 +Place Project
 *  Developer: Saneyuki Tadokoro
*/
gfxt.initialize=function(){var base=gfxt.sys('base' ),temp=gfxt.sys('template' ),hmon=gfxt.sys('hash_monitor' ),twit=gfxt.sys('twitter' );var indexOf=function(target,value ){for(var i=0;target && target[ i ];i++){if(target[ i ]===false )return r;}return -1;};var fid=['search-in-home','search-in-result','search-in-cache'];var parts=(function(){var id,elem,form,ary=[];for(var i=0;fid[ i ];i++){id=fid[ i ];ary[ id ]=[];form=document.getElementById(id );for(var j=0;form.getElementsByTagName('*')[ j ];j++){elem=form.getElementsByTagName('*')[ j ];switch(elem.getAttribute('data-search-sort' ) ){case 'username':ary[ id ][ 'username' ]=elem;break;case 'date':ary[ id ][ 'date' ]=elem;break;case 'button':ary[ id ][ 'button' ]=elem;break;}switch(elem.getAttribute('data-input-type' ) ){case 'calendar':ary[ id ][ 'calendar' ]=elem;break;}}}return ary;})();for(var id,i=0;fid[ i ];i++){id=fid[ i ];temp.setSearchHints(parts[ id ][ 'username' ],'Username','#a2a2a2','#000','#fff','#f4c8c8' );}var setDateListener=function(textElement,inputTarget ){return function(){var date=new Date(),sy=date.getYear();sy=sy>=2000?sy:sy+1900;sm=date.getMonth()+1;var cal=temp.createCalendar(sy,sm,function(y,m,d ){textElement.validMethod();textElement.value=[ y,'-',m,'-',d ].join('');});inputTarget.appendChild(cal );};};for(var type,i=0;fid[ i ];i++){type=parts[ fid[ i ] ];temp.setSearchHints(type[ 'date' ],'Date','#a2a2a2','#000','#fff','#f4c8c8' );base.addEvent('mousedown',setDateListener(type[ 'date' ],type[ 'calendar' ] ),type[ 'date' ] );}var setRequester=function(formId,usernameText,dateText ){return function(){var res,err=false,r=temp.getSearchValues(formId );var u=String(r.username),y=String(r.year),m=String(r.month),d=String(r.date);if(usernameText.isTyped()===false ){err=true;usernameText.errorMethod();}if(!u.match(/^(@|[A-Z]|[a-z]|[0-9]|_)([A-Z]|[a-z]|[0-9]|_)*(\b|[A-Z]|[a-z]|[0-9]|_)$/) ){err=true;usernameText.errorMethod();}if(y.match(/^[0-9]*$/)==null||m.match(/^[0-9]*$/)==null||d.match(/^[0-9]*$/)==null ){err=true;dateText.errorMethod();}if(err===true ){return false;}if(u.match(/^@.*/) )u=u.slice(1 );var qstr=encodeURI('!page=search;username='+u+';year='+y+';month='+m+';date='+d );hmon.setHash(qstr );return false;};};for(var type,req,i=0;fid[ i ];i++){type=parts[ fid[ i ] ];req=setRequester(fid[ i ],type[ 'username' ],type[ 'date' ] );base.addEvent('click',req,type[ 'button' ] );}var resetSearchForms=function(){for(var type,i=0;fid[ i ];i++){type=parts[ fid[ i ] ];type[ 'username' ].resetMethod();type[ 'date' ].resetMethod();if(type[ 'calendar' ].childNodes.length>0 ){base.removeChildren(type[ 'calendar' ] );}}};var mon=[ 31,28,31,30,31,30,31,31,30,31,30,31 ];var prd=document.getElementById('previous-day' ),nxd=document.getElementById('next-day' );var prdLis=function(){var v=temp.parseHash(location.hash );if(v.date==1 ){if(v.month==1 ){v.month=12;v.year--;}else if(v.month==3 ){mon[ 1 ]=28+(v.year % 4?0:v.year % 100?1:v.year % 400?0:1);v.month--;}else{v.month--;}v.date=mon[ v.month - 1 ];}else{v.date--;}var qstr=encodeURI('!page=search;username='+v.username+';year='+v.year+';month='+v.month+';date='+v.date );hmon.setHash(qstr );};var nxdLis=function(){var v=temp.parseHash(location.hash );var da=mon[ v.month - 1 ];if(v.date==da ){if(v.month==12 ){v.month=1;v.year++;}else if(v.month==1 ){mon[ 1 ]=28+(v.year % 4?0:v.year % 100?1:v.year % 400?0:1);v.month++;}else{v.month++;}v.date=1;}else{v.date++;}var qstr=encodeURI('!page=search;username='+v.username+';year='+v.year+';month='+v.month+';date='+v.date );hmon.setHash(qstr );};base.addEvent('mousedown',prdLis,prd );base.addEvent('mousedown',nxdLis,nxd );var cv=base.getElementsByDataset('input-type','cache-viewer' ),tws=document.getElementById('cache' );var setListMaker=function(elem,un,n,isrc ){base.addEvent('mousedown',function(){if(tws.childNodes.length>0 ){base.removeChildren(tws );}var ca=twit.getAllCache(),daAry=[],line_Ttl=document.createElement('tr' ),coun_Ttl=document.createElement('td' ),con_Ttl=document.createElement('td' ),coico_Ttl=document.createElement('td' ),ico_Ttl=document.createElement('img' );ico_Ttl.src=isrc;line_Ttl.className='cache-line';coun_Ttl.className='cache-username';con_Ttl.className='cache-name';coico_Ttl.className='cache-icon';coun_Ttl.appendChild(document.createTextNode(un ) );con_Ttl.appendChild(document.createTextNode(n ) );coico_Ttl.appendChild(ico_Ttl );line_Ttl.appendChild(coico_Ttl );line_Ttl.appendChild(coun_Ttl );line_Ttl.appendChild(con_Ttl );tws.appendChild(line_Ttl );un=un.toLowerCase();for(var i=0,num=1;ca[ un ][ i ];i++){var it=ca[ un ][ i ].item;for(var j=0;it[ j ];j++){var d=it[ j ];var r=(function(){for(var k=0;daAry[ k ];k++){if(daAry[ k ][ 0 ]==d.year && daAry[ k ][ 1 ]==d.month && daAry[ k ][ 2 ]==d.date )return daAry;}return -1;})();if(r==-1){var line=document.createElement('tr' ),conum=document.createElement('td' ),coda=document.createElement('td' );conum.appendChild(document.createTextNode(num ) );coda.appendChild(document.createTextNode([ d.year,'-',d.month,'-',d.date ].join('') ) );line.appendChild(conum );line.appendChild(coda );tws.appendChild(line );line.className='cache-date-line';line.onmousedown=(function(){var hash=[ '!page=search;username=',un,';year=',d.year,';month=',d.month,';date=',d.date ].join('');return function(){hmon.setHash(hash );};})();daAry.push([ d.year,d.month,d.date ] );num++;}}}},elem );};var cvLis=function(){if(tws.childNodes.length>0 ){base.removeChildren(tws );}var ud=twit.getAllUser();for(var j in ud ){var d=ud[ j ],line=document.createElement('tr' ),coun=document.createElement('td' ),con=document.createElement('td' ),coico=document.createElement('td' ),ico=document.createElement('img' );ico.src=d[ 'profile_image_url' ];line.className='cache-line';coun.className='cache-username';con.className='cache-name';coico.className='cache-icon';coun.appendChild(document.createTextNode(d[ 'screen_name' ] ) );con.appendChild(document.createTextNode(d[ 'name' ] ) );coico.appendChild(ico );line.appendChild(coico );line.appendChild(coun );line.appendChild(con );tws.appendChild(line );setListMaker(line,d[ 'screen_name' ],d[ 'name' ],d[ 'profile_image_url' ] );}};for(var i=0;cv[ i ];i++){base.addEvent('mousedown',function(){cvLis();},cv[ i ] );}var ho=document.getElementById('home-body' );var mk=function(){var t=gfxt.uAgent.clientHeight/2 - ho.offsetHeight/2;if(t>=0 )ho.style.top=t+'px';else if(t<0){ho.style.top='0px';}};base.addEvent('resize',mk );var lang=gfxt.uAgent.language;var rme;var stopReq=function(){if(typeof rme=='object' && typeof rme.stop=='function' ){rme.stop();}};hmon.addEvent(function(ha ){stopReq();resetSearchForms();if(ha==''||ha=='#!page=top' ){document.title='Twitter Search';mk();}else if(ha=='#!page=cache' ){document.title='Twitter Search - Cache';temp.activateContainer('cache-container' );cvLis();}else if(ha.match(/page=search/)){var v=temp.parseHash(ha );rme=temp.request(v );temp.activateContainer('result-container' );temp.mirrorSearchValues('search-in-result',v );}else if(ha=='#!error=not_found'){document.title='Twitter Search - Not Found';temp.getContainerContents('general-container','html/'+lang+'/error/not_found.html',null,true );}else if(ha=='#!page=about;section=us' ){document.title='Twitter Search - About';temp.getContainerContents('general-container','html/'+lang+'/about/us.html',null,true );}else if(ha=='#!page=about;section=team' ){document.title='Twitter Search - Team';temp.getContainerContents('general-container','html/'+lang+'/about/team.html',null,true );}else if(ha=='#!page=help;section=operation' ){document.title='Twitter Search - Help';temp.getContainerContents('general-container','html/'+lang+'/help/operation.html',null,true );}else if(ha=='#!page=help;section=api' ){document.title='Twitter Search - Twitter API';temp.getContainerContents('general-container','html/'+lang+'/help/api.html',null,true );}else if(ha=='#!page=help;section=browsers' ){document.title='Twitter Search - Supported Browsers';temp.getContainerContents('general-container','html/'+lang+'/help/browsers.html',null,true );}else if(ha=='#!page=terms;section=tos' ){document.title='Twitter Search - Terms';temp.getContainerContents('general-container','html/'+lang+'/terms/tos.html',null,true );}else if(ha=='#!page=privacy;section=policy' ){document.title='Twitter Search - Privacy';temp.getContainerContents('general-container','html/'+lang+'/privacy/policy.html',null,true );}else{hmon.setHash('!error=not_found' );}});hmon.setHomeContainer('home-container' );hmon.startupMonitor();document.getElementById('loading-page' ).style.display='none';gfxt.initialize=function(){};};window.onload=gfxt.initialize;(function(gfxt ){var base=gfxt.sys('base' );var p=(function(){var ACTIVE=null;var TIMER=null;var core=function(){var method={activateContainer:function(id ){var co=document.getElementById(id );if(method.isActiveContainer(id )||typeof co !='object' )return false;if(ACTIVE )ACTIVE.style.display='none';co.style.display='block';ACTIVE=co;return true;},isActiveContainer:function(id ){var co=document.getElementById(id );return ACTIVE==co;},getActiveContainer:function(){return ACTIVE;},getActiveContainerId:function(){return ACTIVE.id;},getContainerContents:function(id,fn,cb,f ){if(f===true ){var wa=document.getElementById('loading-page' );wa.style.display='block';method.activateContainer(id );}base.getResponse({responseType:'TXT',method:'GET',fileName:fn,async:true,cache:false,postData:null,callback:function(rTxt ){var elem=document.getElementById(id );elem.innerHTML=rTxt;if(f===true )wa.style.display='none';if(typeof cb=='function' ){cb();}}});},setSearchHints:function(tar,v,dc,ac,nc,ec ){var err,f,g=true;tar.value=v;tar.style.color=dc;base.addEvent('mousedown',function(){if(tar.value !='' ){if(g){tar.value='';tar.style.color=ac;g=false;}}else{return false;}},tar );base.addEvent('mouseover',function(){f=false;},tar );base.addEvent('mouseout',function(){f=true;},tar );base.addEvent('mousedown',function(){if(!f||tar.value !='') return false;tar.value=v;tar.style.color=dc;g=true;});tar.resetMethod=function(){tar.style.color=dc;tar.style.backgroundColor=nc;tar.value=v;f=false;g=true;err=false;};tar.validMethod=function(){tar.style.color=ac;g=false;};tar.isTyped=function(){return !g;};tar.errorMethod=function(){err=true;tar.style.backgroundColor=ec;};tar.delErrorMethod=function(){if(err !==true)return false;err=false;tar.style.backgroundColor=nc;};},request:function(r ){var stop=false;var p=String(r.page ),u=String(r.username ),y=String(r.year ),m=String(r.month ),d=String(r.date );if(!u.match(/^(@|[A-Z]|[a-z]|[0-9]|_)([A-Z]|[a-z]|[0-9]|_)*(\b|[A-Z]|[a-z]|[0-9]|_)$/) )return 'E:username';if(!y.match(/[0-9]*/)||!m.match(/[0-9]*/)||!d.match(/[0-9]*/) )return 'E:date';if(p !='search' )return 'E:page';if(u.match(/^@.*/) )u=u.slice(1 );r.page=0;var msg=gfxt.sys().getAccessory('template' ).messages;var ca,ss,da,ny,nm,nd,nh,nmi,ns;var monStr=[ 'Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec' ];var receive=function(data ){if(stop===true ){return false;}if(typeof data !='string' ){var ren=method.getMatchData(data,r );if(ren.item && ren.item.length>0 ){ss=ren.searchStatus;method.alterSearchStatus(ss.results+' results',' - '+ss.username,' on '+ss.date,'&nbsp;' );method.createTweets(ren,15 );method.hideAjaxLoader();method.showOtherDay();if(ren.item.length>15 )method.showAddition(ren,15,15 );}else if(ren=='E:not_found' ){r.page++;method.alterSearchStatus('Searching',' ',' ','Page:'+(r.page+1)+'/10' );tp().getUserTimeline(r,receive );}else{method.alterSearchStatus('0 results',' - '+u,d+' '+monStr[ m - 1 ]+','+y,'&nbsp;' );method.hideAjaxLoader();method.showOtherDay();}}else if(data=='E:nonexistence' ){method.showMessage(msg.nonexistence );method.alterSearchStatus('0 results',' - '+u,d+' '+monStr[ m - 1 ]+','+y,'&nbsp;' );method.hideAjaxLoader();}else if(data=='E:not_found' ){method.alterSearchStatus('0 results',' - '+u,d+' '+monStr[ m - 1 ]+','+y,'&nbsp;' );method.hideAjaxLoader();method.showOtherDay();ca=tp().getNearDate(r );if(ca ){method.showMessage('<p style="font-weight:bold;">'+msg.notFound+'</p><p style="font-size:12px;">'+msg.nearDate+'<a href="#!page=search;username='+u+';year='+ca.year+';month='+ca.month+';date='+ca.date+'">'+ca.year+'-'+ca.month+'-'+ca.date+'</a></p>');}else{method.showMessage(msg.noneTweets );}}else if(data=='E:limited' ){var lim=tp().getLimit();da=new Date(lim[ 'reset_time' ] );ny=da.getYear();ny=ny>=2000?ny:ny+1900;nm=da.getMonth();nd=da.getDate();nh=da.getHours();nmi=da.getMinutes();ns=da.getSeconds();if(isNaN(ny )||isNaN(nm )||isNaN(nd ) ){var sd=lim[ 'reset_time' ].split(' ');var xd=sd[ 0 ]+" "+sd[ 1 ]+" "+sd[ 2 ]+" "+sd[ 5 ]+" "+sd[ 3 ]+" "+sd[ 4 ];da=new Date(xd );ny=da.getYear();ny=ny>=2000?ny:ny+1900;nm=da.getMonth();nd=da.getDate();nh=da.getHours();nmi=da.getMinutes();ns=da.getSeconds();}method.showMessage(msg.limited+nh+':'+nmi+':'+ns+' on '+monStr[ nm ]+' '+nd+','+ny );method.alterSearchStatus('0 results',' - '+u,d+' '+monStr[ m - 1 ]+','+y,'&nbsp;' );method.hideAjaxLoader();}else{method.alterSearchStatus('0 results',' - '+u,d+' '+monStr[ m - 1 ]+','+y,'&nbsp;' );method.hideAjaxLoader();method.showOtherDay();}};method.deleteAllTweets();method.alterSearchStatus('Searching',' ',' ','Page:'+(r.page+1)+'/10' );method.showAjaxLoader();method.hideOtherDay();method.hideMessage();method.hideAddition();var rme=tp().getUserTimeline(r,receive );return{stop:function(){rme.stop();stop=true;}};},createCalendar:function(y,m,cb ){var mon=[ 31,28,31,30,31,30,31,31,30,31,30,31 ];var monStr=[ 'Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec' ];var days=[ 'Sun','Mon','Tue','Wed','Thu','Fri','Sat' ];var da=mon[ m - 1 ];var dof=(new Date(y,m - 1,1,0,0,0 ) ).getDay();var calarr=new Array();if(m==2 ){da+=y % 4?0:y % 100?1:y % 400?0:1;}for(var d=1;d<=da;d++){calarr[ d+dof - 1 ]=d;}var applyCb=function(elem,y,m,d ){base.addEvent('mousedown',function(){cb(y,m,d );},elem);};var cal=document.createElement('div' );var calhd=document.createElement('table' ),hd=document.createElement('tr' ),cr=document.createElement('th' ),prm=document.createElement('th' ),nxm=document.createElement('th' );cr.innerHTML=[ monStr[ m - 1 ],',',y ].join('');prm.innerHTML='<<';nxm.innerHTML='>>';prm.style.width='10px';prm.style.cursor='pointer';nxm.style.width='10px';nxm.style.cursor='pointer';calhd.style.width='100%';hd.appendChild(prm);hd.appendChild(cr);hd.appendChild(nxm);calhd.appendChild(hd);cal.appendChild(calhd);base.addEvent('mousedown',function(){var ny=y,nm=m;if(nm==1){ny--;nm=12;}else{nm--;}var newCal=method.createCalendar(ny,nm,cb );cal.parentNode.replaceChild(newCal,cal );},prm);base.addEvent('mousedown',function(){var ny=y,nm=m;if(nm==12){ny++;nm=1;}else{nm++;}var newCal=method.createCalendar(ny,nm,cb );cal.parentNode.replaceChild(newCal,cal );},nxm);var calTable=document.createElement('table' );var day,date,week,calbd=document.createElement('tbody' ),calDays=document.createElement('tr' );for(var i=0;i<7;i++){day=document.createElement('th' );day.className='calendar-day';day.appendChild(document.createTextNode(days[ i ] ) );calDays.appendChild(day );}calbd.appendChild(calDays );for(var j=0,l=calarr.length;j<l;j++){if(j % 7==0)week=document.createElement('tr' );date=document.createElement('td' );if(calarr[ j ]){date.appendChild(document.createTextNode(calarr[ j ] ) );date.className='calendar-date';if(typeof cb=='function' )applyCb(date,y,m,calarr[ j ] );}week.appendChild(date );if(j % 7==6)calbd.appendChild(week );}calbd.appendChild(week );calTable.appendChild(calbd );cal.appendChild(calTable);calTable.className='calendar-table';var calft=document.createElement('div' );calft.style.width='100%';calft.style.textAlign='center';calft.style.paddingTop='5px';calft.style.borderTop='1px solid #e5e5e5';calft.style.cursor='pointer';calft.innerHTML='Done';base.addEvent('mousedown',function(){base.removeChildren(cal.parentNode);},calft);cal.appendChild(calft);cal.className='calendar';return cal;},createTweets:function(d,num ){var it;for(var i=0;d.item[ i ] && i<num;i++){it=d.item[ i ];method.createTweet(it );}},createTweet:function(v ){var tw=document.createElement('div' ),twic=document.createElement('div' ),twbo=document.createElement('div' ),twun=document.createElement('div' ),twtx=document.createElement('div' ),twst=document.createElement('div' ),twim=document.createElement('img' ),twso=document.createElement('span' ),twut=document.createElement('span' ),twnt=document.createElement('span' ),src=document.createElement('span' ),twda=document.createElement('a' );tw.className='tweet';twic.className='tweet-icon';twbo.className='tweet-body';twun.className='tweet-names';twtx.className='tweet-text';twst.className='tweet-status';twut.className='tweet-username';twnt.className='tweet-name';twda.className='tweet-date';twso.className='tweet-source';twim.src=v.profileImage;twda.href=v.page;twda.target='_blank';src.innerHTML=v.source;src.childNodes[ 0 ].className='tweet-source';twut.appendChild(document.createTextNode(v.username ) );twnt.appendChild(document.createTextNode(' - '+v.name ) );twtx.appendChild(document.createTextNode(v.text ) );twda.appendChild(document.createTextNode(v.date+' '+v.monthStr+','+v.year ) );twso.appendChild(document.createTextNode(' via ' ) );twso.appendChild(src );base.addEvent('mousedown',function(){var al=gfxt.appliedLayer({width:400,height:400,top:50,left:gfxt.uAgent.clientWidth/2 - 150,title:v.username});al.controller.disableResize();var ud=tp().getUser(v.username );var isrc=ud[ 'profile_image_url' ];var ca=al.parts.clientArea;ca.innerHTML='<div style="width:340px;margin:20px 0px 0px 20px;text-align:left;"><div style="float:left;"><img src="'+isrc.replace(/_normal/,'_bigger')+'" alt=""/></div><div style="margin-left:20px;float:left;"><div style="font-weight:bold;font-size:16px;margin-top:10px;">'+ud[ 'name' ]+'</div><div style="font-weight:bold;margin-top:10px;">@'+ud[ 'screen_name' ]+'</div></div></div><div style="width:340px;clear:both;margin-left:20px;padding-top:20px;font-size:12px;">'+ud[ 'description' ]+'</div><div style="width:340px;margin-left:20px;padding-top:20px;">Tweets:'+ud[ 'statuses_count' ]+'</div><div style="width:340px;margin-left:20px;">Followers:'+ud[ 'followers_count' ]+'</div><div style="width:340px;margin-left:20px;">Friends:'+ud[ 'friends_count' ]+'</div><div style="width:100%;line-height:30px;margin-top:20px;background-color:#e2e2e2;text-align:center;"><a href="https://twitter.com/'+v.username+'" target="_blank">More information...</a></div>';},twut );twic.appendChild(twim );twst.appendChild(twda );twst.appendChild(twso );twun.appendChild(twut );twun.appendChild(twnt );twbo.appendChild(twun );twbo.appendChild(twtx );twbo.appendChild(twst );tw.appendChild(twic );tw.appendChild(twbo );document.getElementById('tweets' ).appendChild(tw );},deleteAllTweets:function(){var elem=document.getElementById('tweets' );if(elem.childNodes.length>0){base.removeChildren(document.getElementById('tweets' ) );}},alterSearchStatus:function(nm,un,da,pa ){var rnm=document.getElementById('status-number' ),run=document.getElementById('status-username' ),rda=document.getElementById('status-date' ),rpa=document.getElementById('status-page' );rnm.innerHTML=nm;run.innerHTML=un;rda.innerHTML=da;rpa.innerHTML=pa;document.title=[ nm,un,da,' - Twitter Search' ].join('' );},showAjaxLoader:function(){document.getElementById('loading' ).style.display='block';},hideAjaxLoader:function(){document.getElementById('loading' ).style.display='none';},showOtherDay:function(){document.getElementById('previous-day' ).style.display='inline';document.getElementById('next-day' ).style.display='inline';},hideOtherDay:function(){document.getElementById('previous-day' ).style.display='none';document.getElementById('next-day' ).style.display='none';},showMessage:function(msg ){var elem=document.getElementById('message' );elem.style.display='block';elem.innerHTML=msg;},hideMessage:function(){var elem=document.getElementById('message' );elem.style.display='none';elem.innerHTML='&nbsp;';},showAddition:function(d,num,rel ){var elem=document.getElementById('addition' );elem.style.display='block';elem.onmousedown=function(){if(d.item.length>rel ){var rd=new Object();rd.item=d.item.slice(rel,rel+num );rd.searchStatus=d.searchStatus;method.createTweets(rd,num );if(d.item.length<=rel+num ){method.hideAddition();}else{method.showAddition(d,num,rel+num );}}else{method.hideAddition();}};},hideAddition:function(d,num,rel ){var elem=document.getElementById('addition' );elem.style.display='none';elem.onmousedown=function(){};},getMatchData:function(r,v ){var ren=new Object(),item=new Array(),it=r.item;for(var i=0,j=0;it[ i ];i++){if(it[ i ].year==v.year && it[ i ].month==v.month && it[ i ].date==v.date ){item[ j ]=it[ i ];j++;}}if(item.length>0 ){ren.searchStatus=r.serchStatus;base.extend(ren,{searchStatus:r.searchStatus});ren.searchStatus.date=[ item[ 0 ].date,' ',item[ 0 ].monthStr,',',item[ 0 ].year ].join('');ren.searchStatus.results=item.length;base.extend(ren,{item:item});}else{ren='E:not_found';}return ren;},getSearchValues:function(fid ){var em,v=new Object(),frm=document.getElementById(fid );for(var i=0;frm.elements[ i ];i++){em=frm.elements[i];switch(em.getAttribute('data-search-sort' ) ){case 'username':v.username=em.value;break;case 'date':var da=em.value.split('-' );v.year=da[ 0 ];v.month=da[ 1 ];v.date=da[ 2 ];break;}}return v;},mirrorSearchValues:function(fid,v ){var r,em,frm=document.getElementById(fid );for(var i=0;frm.elements[ i ];i++){em=frm.elements[ i ];switch(em.getAttribute('data-search-sort' ) ){case 'username':em.value=v.username;em.validMethod();break;case 'date':em.value=[ v.year,'-',v.month,'-',v.date ].join('' );em.validMethod();break;}}},parseHash:function(ha){if(ha.match(/^#.*/))ha=ha.slice(1);if(ha.match(/^!.*/))ha=ha.slice(1);var r,v=new Array(),q=ha.split(';');for(var i=0;q[i];i++){r=q[i].split('=');v[r[0]]=r[1];}return v;}};return method;};return core;})();gfxt.sys().addPackage('template',p);var hp=(function(){var HASH=null;var HOME=null;var MONITOR=null;var LISTENER=new Array();var core=function(){var method={startupMonitor:function(){MONITOR=setInterval(function(){if(HASH !=location.hash ){if(location.hash==''||location.hash=='#!page=top' ){p().activateContainer(HOME );}HASH=location.hash;for(var i=0;i<LISTENER.length;i++) LISTENER[ i ](HASH );}},1);},stopMonitor:function(callback ){clearInterval(MONITOR );setTimeout(function(){callback();},100 );},setHomeContainer:function(id ){HOME=id;},setHash:function(hash ){if(hash.match(/^#.*/)==null)hash='#'.concat(hash );method.stopMonitor(function(){location.hash=hash;method.startupMonitor();});},addEvent:function(listener ){LISTENER.push(listener );}};return method;};return core;})();gfxt.sys().addPackage('hash_monitor',hp );var tp=(function(){var USER=new Array();var CACHE=new Array();var LIMIT=null;var core=function(){var method={addCache:function(data,username,page ){var un=username.toLowerCase();if(typeof CACHE[ un ] !='object' ){CACHE[ un ]={};}CACHE[ un ][ page ]=data;},getCache:function(un,pg ){var r=null,d;un=un.toLowerCase();if(CACHE[ un ] && CACHE[ un ][ pg ] ){r=CACHE[ un ][ pg ];}return r;},getAllCache:function(){return CACHE;},addUser:function(un,ud ){un=un.toLowerCase();USER[ un ]=ud;},getUser:function(un ){un=un.toLowerCase();return USER[ un ];},getAllUser:function(){return USER;},setLimit:function(d ){LIMIT=d;},getLimit:function(){return LIMIT;},getUserTimeline:function(v,cb ){if(v.page>=10 ){cb('E:not_found');}var stop=false;var id,retry=2,rateRetry=2,flag=true;var un=v.username;un=un.toLowerCase();var apicb=function(d ){var r=method.parseResponse(d );if(typeof r !='string'){method.addCache(r,v.username,v.page );if(!USER[ un ] ){method.addUser(v.username,d[0]['user']);}}cb(r );};var getter=function(){if(stop===true ){return false;}base.getJs('http://api.twitter.com/1/account/rate_limit_status.json\?callback=gfxt.twitterApi.getRateLimit',getterMain);};var getterMain=function(err ){if(err !='E:loading' ){if(Number(LIMIT['remaining_hits'] )>30 ){base.getJs('https://api.twitter.com/1/statuses/user_timeline.json\?include_entities=true\&include_rts=true\&screen_name='+v.username+'\&count=200\&page='+(v.page+1)+'\&callback=gfxt.twitterApi.'+id,handler);}else{cb('E:limited' );}}else if(err=='E:loading' && rateRetry>0){rateRetry--;getter();}else if(err=='E:loading'){cb('E:nonexistence' );}};var handler=function(err){if(err=='E:loading' && retry>0 ){retry--;id='f'+String((new Date()).getTime());gfxt.twitterApi[ id ]=apicb;getter();}else if(err=='E:loading' ){cb('E:nonexistence' );}};if(method.getUser(v.username ) ){var sc=Number(method.getUser(v.username )['statuses_count']);flag=sc>=(200 * v.page);}if(method.getCache(v.username,v.page ) !=null){cb(method.getCache(v.username,v.page ) );}else if(flag ){id='f'+String((new Date()).getTime());gfxt.twitterApi[ id ]=apicb;getter();}else{cb('E:not_found' );}return{stop:function(){stop=true;}};},getNearDate:function(v ){var r,y,m,d,dp,item,f=[ false,false,false ],da=new Object(),ml=[ 9999,99,99 ],un=v.username;un.toLowerCase();var data=CACHE[ un ];if(data !=null ){for(var p=0;data[ p ];p++){dp=data[ p ].item;for(var i=0;dp[ i ];i++){item=dp[ i ];y=Math.abs(v.year - item.year );m=Math.abs(v.month - item.month );d=Math.abs(v.date - item.date);if(d<=ml[ 2 ] ){ml[ 2 ]=d;f[ 2 ]=true;}else if(d>ml[ 2 ] ){f[ 2 ]=false;}if(m<=ml[ 1 ] ){ml[ 1 ]=m;f[ 1 ]=true;}else if(m>ml[ 1 ] ){f[ 1 ]=false;}if(y<=ml[ 0 ] ){ml[ 0 ]=y;f[ 0 ]=true;}else if(y>ml[ 0 ]){f[ 0 ]=false;}if(!f.indexOf ){r=(function(){for(var j=0;f[ j ];j++){if(f[ j ]===false )return r;}return -1;})();}else{r=f.indexOf(false );}if(r !=-1){break;}else{da.date=item.date;da.month=item.month;da.year=item.year;}}}}else{return false;}return da;},parseResponse:function(r ){var monStr=[ 'Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec' ];var da,y,m,d,ren,item=new Array();for(var i=0,j=0;r && r[ i ];i++){da=new Date(r[ i ][ 'created_at'] );y=da.getYear();y=y>=2000?y:y+1900;m=da.getMonth();d=da.getDate();if(isNaN(y )||isNaN(m )||isNaN(d ) ){var sd=r[ i ][ 'created_at' ].split(' ');var xd=sd[ 0 ]+" "+sd[ 1 ]+" "+sd[ 2 ]+" "+sd[ 5 ]+" "+sd[ 3 ]+" "+sd[ 4 ];da=new Date(xd );y=da.getYear();y=y>=2000?y:y+1900;m=da.getMonth();d=da.getDate();}item[ j ]={username:r[ i ][ 'user' ][ 'screen_name' ],name:r[ i ][ 'user' ][ 'name' ],text:r[ i ][ 'text' ],year:y,month:m+1,monthStr:monStr[ m ],date:d,source:r[ i ][ 'source' ],profileImage:r[ i ][ 'user' ][ 'profile_image_url' ],page:'http://twitter.com/'+r[ i ][ 'user' ][ 'screen_name' ]+'/status/'+r[ i ][ 'id_str' ]};j++;}if(item.length>0 ){ren={searchStatus:{results:item.length,username:r[ 0 ][ 'user' ][ 'screen_name' ],name:r[ 0 ][ 'user' ][ 'name' ]}};base.extend(ren,{item:item});}else{ren='E:not_found';}return ren;}};return method;};return core;})();gfxt.sys().addPackage('twitter',tp);gfxt.twitterApi={getRateLimit:function(d ){tp().setLimit(d );}};})(gfxt);